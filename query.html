<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BCTP - 行為後果查詢</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🛡️</text></svg>">
</head>
<body>
    <header>
        <div class="container">
            <h1>BCTP</h1>
            <p>霸凌行為後果透明化資訊平台</p>
        </div>
    </header>

    <main>
        <div class="container main-layout">
            
            <div class="filter-panel">
                <h2>步驟一：行為勾選</h2>
                <p>勾選觸發法律後果的行為，查看對應的法律後果。</p>

                <div class="checkbox-group" id="behavior-filters">
                    <label><input type="checkbox" name="behavior" value="physical-injury"> 肢體推打 / 造成輕傷</label>
                    <label><input type="checkbox" name="behavior" value="online-slander"> 網路散布謠言 / 損害名譽</label>
                    <label><input type="checkbox" name="behavior" value="money-extortion"> 威脅取財 / 損毀支付金錢</label>
                    <label><input type="checkbox" name="behavior" value="psychological-damage"> 密集訊息騷擾 / 造成精神壓力</label>
                </div>
            </div>

            <div class="results-panel">
                <h2>步驟二：後果警示 (即時互動)</h2>
                <p>請在左側勾選行為標籤，結果將即時顯示相關法律條文與判例。</p>

                <div id="results-area">
                    <div id="statute-results"></div>
                    <div id="case-results"></div>
                </div>
            </div>
            
        </div> 

        <div class="button-footer">
            <a href="form.html" class="submit-button">下一步：反思表單 &rarr;</a>
        </div>
    </main>
    
    <footer>
        <p>BCTP (Bullying Consequence Transparency Platform)</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const filterContainer = document.getElementById('behavior-filters');
            const checkboxes = filterContainer.querySelectorAll('input[type="checkbox"]');

            // 確保每次加載頁面時，清除 Local Storage 以防止殘留數據，直到用戶勾選
            localStorage.removeItem('selectedBehaviors');

            function updateResults() {
                const checkedValues = Array.from(checkboxes)
                    .filter(cb => cb.checked)
                    .map(cb => cb.value);

                if (checkedValues.length === 0) {
                    localStorage.removeItem('selectedBehaviors'); 
                    // 這裡應放置您顯示「請勾選行為」的邏輯
                    return;
                }
                
                let behaviorNames = [];
                checkedValues.forEach(value => {
                    const labelElement = filterContainer.querySelector(`input[value="${value}"]`).parentElement;
                    behaviorNames.push(labelElement ? labelElement.textContent.trim() : value);
                });
                
                // --- 關鍵步驟：將勾選的行為名稱儲存到 Local Storage ---
                const selectedBehaviors = behaviorNames.join('; '); 
                localStorage.setItem('selectedBehaviors', selectedBehaviors);
                
                // 這裡應放置您顯示法律結果和判例的邏輯
            }

            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateResults);
            });
            updateResults();
        });
    </script>
</body>
</html>
